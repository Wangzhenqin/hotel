<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.roomsDao">
    <select id="searchRooms" resultType="com.example.demo.entity.roomType">
        select room_type.name,room_type.money,count(rooms.r_id)as number
        from room_type join rooms on room_type.id=rooms.type
        group by rooms.type
    </select>
    <update id="checkInRoom" parameterType="com.example.demo.entity.rooms">
        update rooms
        <set>
            <if test="inTime!=null">in_time=#{inTime},</if>
            <if test="outTime!=null">out_time=#{outTime},</if>
            <if test="pId!=null">p_id=#{pId},</if>
            <if test="pName!=null">p_name=#{pName},</if>
        </set>
        where type=#{type} and isnull(in_time)
        limit 1
    </update>
</mapper>